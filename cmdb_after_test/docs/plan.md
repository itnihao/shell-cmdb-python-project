cmdb规划
2015年11周
* 10周主要工作
    * 主机回收
        * 本周共回收6台机器，5台已经限制网络，1台正在进行
    * 开发类
        * 监控重构
        * 配件库小优化
        * knowing 链接到CMDB主机详情页
        * 主机权限到期提前3天提醒
    * Zabbix 数据库迁移
* 11周主要工作
    * 监控(谢鹏)
        * zabbix base模板
        * zabbix 主机监控项自动化检测(例如 app主机应该都有多少下监控，如果某台主机不是这么多项监控是有问题的)
        * 自动check CMDB主机是否都有加zabbix 监控
    * DNS(郁进榜)
        * DNS 和 DNSPOD 配置整理(应该配置多余，将dns和dnspod配置整理顺)
        * LB 分流规则(上次说通过DNSPOD 分流的,但是看DNSPOD配置无法解释)
        * DNS系统迁移
    * CMDB
        * 工单Tickets系统数据库设计和UI原型图 -- 郭威
        * ddns系统逻辑整理并做数据库设计(dnsapply也要考虑) -- 雒晓帆和郁进榜
        * 虚拟机报告(例如共多少台宿主机，每台宿主机下已有多少台虚拟机，还可以做再开多少台)  -- 雒晓帆和郁进榜
    * 主机回收
        * 每人在[主机回收清单](http://gitlab.corp.anjuke.com/_infra/cmdb/issues/30)挑选至少5台主机3月份回收
    * 额外任务
        * 了解v2框架整理架构和环境配置(可以先尝试thinkphp环境搭建和基本CRUD) --  雒晓帆
        * 列出cmdb所有功能，并且说出你们认为cmdb这些功能的作用 -- 所有人
        * Flask框架环境搭建并实现用户登陆和注册功能 -- 所有人

10周主要工作
* 谢鹏
    * zabbix数据库迁移，准备工作check 周三完成
    * zabbix 共同模板（数据库迁移后再做）
    * 回收两台qa的机器(xqa20-001,xqa20-002,xqa20-003)

* 郁进榜
    * dns性能对比 物理机和虚拟机
    * 虚拟平台统计报表（例如共多少台宿主机，每台宿主机下已有多少台虚拟机，还可以做再开多少台）
    * 回收monitor机器 app10-159 限制网络了

* 雒晓帆
    * 回收机器 xapp10-080 网络限制了
    * 配件库出库时候允许不不关联设备并且此代码需要重构
    * 机器过期删除key应该提前发邮件
    * DB部门申请主机权限的时候需要可以选择DB机器
    * knowing 弹出层详情中如果是主机名 链接到CMDB 和 knowing邮件提醒其中也加入详情

* 郭威
    * 回收主机 salt 限制网络了
    * [监控UI](http://gitlab.corp.anjuke.com/_infra/cmdb/issues/38)
    * Tickets工单系统表设计


5周主要工作
* 开发类
    * root权限所有人都可以申请
    * 主机,设备,POOL之间日志完善
    * 主机抓取硬件和ip的job合并和完善
    * POOL check Job 漏洞修复并完善POOL状态Bug,外加POOL实现软删除
    * CMDB 错误异常捕获
    * CMDB实现分版本上线,[设计文档](http://gitlab.corp.anjuke.com/_infra/cmdb/blob/master/docs/version.md)

* 机器回收
    * 回收5台主机,已关机(xmq10-001，xmq10-003，xmq10-004，xapp10-020，xapp10-063)
    * [志凡重装9台主机](http://gitlab.corp.anjuke.com/_infra/cmdb/issues/28#note_10490)

6周主要工作
* 谢鹏
    * zabbix数据库迁移方案review（周二开会）
    * zabbix 多模板共同项提取并制作base模板
    * zabbix报警项时长合理性报告
    * kickstart后sa初始化ansible
    * 回收前monitor机器并重装机

* 进榜
    * lb架构学习
    * office dns keepalive
    * dns 两个系统整理
    * one-704和one-705关机回收

* 郭威
    * 设备装态搜索功能
    * 监控页面重新设计
    * 主机job信息核对并自动化加远控卡
    * 监控页面加入满载率
    * 满载率报表加入DB
    * 代码整体review 先job后web


2015年5周
* 4周主要工作
    * 主机申请 上线
    * 日常优化上线
    * 所有主机的状态整理完毕
    * 回收机器状况 （xmq10-001,xmq10-002,xmq10-003,xmq10-004,app10-165）
        * xmq10-001,xmq10-003,xmq10-004,app10-165 经过一周的观察发现服务没有请求了，5周发邮件告知所有人,进行iptable限制
        * xmq10-002 有服务，主要来源于老洪和刘智，5周继续推进迁移

* 5周主要工作
    * 谢鹏
        * zabbix数据据迁移方案确认并执行计划
        * zabbix目前监控统计，例如目前监控机器总数，各监控模板分步，每个模板的监控项，每一项的报警规则
        * 协助lukin回收一台机器（job界面干迁移）
        * 统计机器磁盘，并发邮件告知清理，我们提供周期清理脚本服务(这个郭威提供统计结果,谢鹏推进)

    * 进榜
        * 发主机上线邮件
        * 学习LB
        * dns两个系统整理，整出需求文档和技术重点
        * dns主备同步方案（目前看来有些问题）
        * 回收以前monitor主机

    * 晓帆
        * 将整理出来的快速回收的机器重装系统 ，并且自己要使用kickstart老2台以上机器
        * 所有待回收的主机 进入[ops标记待回收](http://ops.corp.anjuke.com/cmdb/pool/detail/168)POOL
        * 设备，主机，pool日志要更完整，例如pool添加主机，主机也需要日志，添加主机设备也要有日志
        * 主机核对job人工核对并合并
            * 抓取出来的主机信息核对
            * 合并抓取主机硬件,ip，远控卡的Job
        * root权限所有人都可以申请,但是需要两级审批(第二级是板子)

    * 郭威
        * 5台机器回收机器
        * 监控重新设计
        * 设备状态功能实现
        * POOL check Job有bug  done
        * 分版本上线[版本控制设计](http://gitlab.corp.anjuke.com/Vincentguo/cmdb/blob/cmdb_201505/docs/version.md)
        * msg pop增加主机申请提醒

2015年4周
* 3周主要工作
   * 满载率为零的机器排查并接入zabbix(有一部分主机是死的)
   * 虚拟机情况整理
   * ops平台优化
        * 所有线上API验证并加入CMDB助手
        * 采集机器IP，并与CMDB中IP对比 验证是否正确的job
        * 配件库优化，增加排序筛选功能

* 本周工作
   * 3周未完成的工作
        * 设备信息补充完整,需要小陆支持,晓帆推进
        * 监控设计重构(先放下,5周开始)
   * 4周工作
        * 主机状态和设备状态更正
        * 虚拟机回收
            * 确认24台机器是否都关机
            * 确认5台已死的是否已经死了
            * 确认5台无法登陆的是否有办法登陆，如若不能 业务是什么,负责人是谁
            * 4台mq的机器回收
            * app10-165立即回收
        * 主机申请Beta环境再次测试并上线




2015年3周
* 2周主要工作
    * 主机申请开发
    * 自动上线工具
    * 添加修改设备 设备型号可选
    * pool信息api
    * db机器申请权限控制
    * 配件库优化

* 3周主要工作
    * 主机申请上dev环境测试
        * 日志一定要完整
        * 申请主机页面默认虚拟机,数量为1
        * 邮件各个环节必须要发送
    * 开发类
        * api  简单验证(使用requests模块)
        * 采集机器Ip和验证CMDB中的ip是否正确(保证主机所有数据必须要正确)
        * 配件库筛选功能
        * IP池展示修改,先展示IP段,在展示详细IP
        * 流程状态功能实现
    * 满载率为零的机器查明原因并监控起来 [满载率为零的主机](http://gitlab.corp.anjuke.com/_infra/cmdb/issues/27)
    * 监控页面重新设计
    * 设备老数据的硬盘信息应该和配件库的硬盘型号对应起来,需要小陆尽快整理出来
    * 清空脚本,协助好这件事情,让大家都关注 自由报警(目标让所有业务方自由报警用起来)
    * 做准备,统计所有主机目前的磁盘使用率,2月1日-2月10日在统计一次,清理磁盘部署删除脚本,为过年做准备
    * 流程讨论,流程确定后整理所有主机在流程中的状态  [流程讨论](http://gitlab.corp.anjuke.com/_infra/cmdb/issues/29)
    * 6台机器由志凡和盛佐安装系统 [没安装系统的机器](http://gitlab.corp.anjuke.com/_infra/cmdb/issues/28)




2015年2周
* 1周的主要工作
    * 主机申请设计和原型图Review
    * CMDB优化
        * POOL列表和详情页速度,操作和显示优化
        * POOL check Job 自动修改数据
        * 主机详情页和设备详情页,历史记录只显示最新5条记录,外加一个操作记录详情页
        * 配件库支持搜索主机名
        * 配件库添加配置时对应的设备会添加对应配件和操作记录
        * 左边菜单 高亮

* 2周主要工作
    * CMDB主机申请开发  郁进榜和谢鹏参与,进榜控制项目，开发周期从1月12日-1月22日，1月23日上线
    * CMDB设备和主机流程整理和讨论
    * CMDB所有设备关联主机和所有主机入POOL
    * 监控工具统一zabbix,nagios主机迁移
    * CMDB优化
        * POOL 移除主机操作优化
        * 设备的内存,硬盘优化成统一配件库型号
        * 设备form关联 配件库


2015年1周
* 1周的主要工作
    * 主机申请设计和原型图Review
    * CMBD优化
        * POOL详情页太慢,需要优化
        * POOL移除主机的时候,需要验证是否还在其他POOL,必须保证一个主机至少在一个POOL  这个开会说吧
        * POOL check Job 修改成自动化修改数据
        * POOL 列表页 整点的时候显示满载率为0,应该显示上一个点,还有满载率换成ajax吧
        * 主机详情页和设备详情页 历史记录只显示最新5条记录, 另外加一个历史详情页
        * 优化主机添加过程，在设备详情页添加主机,主机详情页加入修改主机
        * 配件库支持搜索主机名,后台关联device就好了
        * 设备修改和添加form 型号,内存,硬盘几个自动搜索
        * 所有搜索的地方,搜索框默认显示搜索
        * 聚合搜索的地方,主机列表也要可点
        * 左边菜单 高亮
        * 配件库 为设备添加配件时,对应的主机硬件信息应该更新
        * 设备可以搜索序列号
        * 主机详情页 的实时满载率整点也是会为0,取上一个点
    * 所有主机必须入POOL,所有设备必须对应主机,这牵扯到新的主机申请过程中实体机申请选择资源

2014年52周
* 51周OPS平台的主要工作
    * 满载率报表
    * 数据库主从配置
    * 满载率归档Job
    * 开通服务器权限和用户更新key时同步Job 重构合并
    * 优化
        * LB 和apc的机器非ops不能申请
        * 离职api

* 52周主要工作
    * 配件库老数据迁移Job
    * 配合进榜一起整理DNS的整体流程
    * zabbix 迁移20台机器到 zabbix  proxy
    * 整理所有cacti和nagios监控server 和client端
    * 配件库开发和上线
    * 优化
        * 接警用户在主机详情和POOL详情


2014年51周
* 50周CMDB小分队主要工作如下
    * 聚合搜索测试
    * 消息提示
    * server agent 全部回收
    * zabbix 运维，开发，使用文档
    * cmdb 几个优化和bug

* 51周主要工作
    * 满载率报表
    * 数据库主从环境
    * 配件库开发
    * 更新主机硬件信息job同时更新主机
    * 同步公钥到目标主机和更新公钥到目标主机job重构
    * 满载亳归档job重写
    * sa机器有个flume 服务查清楚
    * zabbix优化 和 dns文档整理


2014年50周
* 49周CMDB小分队主要工作如下
    * 主机权限测试并上线
    * sa回收了部分
    * 聚合搜索开发

* 50周主要工作
    * 聚合搜索测试
    * 消息提示
    * server agent 全部回收
    * 设备必须对应一个主机(目前有5台设置没有主机,找秦洁和小陆询问过会专门划一个网段给备机)
    * cdn 和dns 出文档 加入wiki
    * zabbix出运维文档
    * CMDB出自动化部署,为新人开发做准备
    * cmdb bug修改(目前发现有些bug)和优化


2014年49周
======================
* 48周cmdb小分队主要工作如下
    * 主机权限申请
    * 主机入pool
    * 主机状态修改


* 49周主要功能在
    * 主机权限测试并上线
    * 设备必须对应一个主机(目前有5台设置没有主机,找秦洁和小陆询问过会专门划一个网段给备机)
    * 聚合搜索
    * 主机状态和主机入pool
    * dns整理和搬迁(王义迁移虚拟机,有个dns在上面，刚好就这个情况整理下dns情况)
    * sa.corp.anjuke.com 平台回收，平台不再使用
    * 满载率报表(秦杰这边特需要报表推进业务方提高机器利用情况)

* CMDB运维分工
    * IDC管理和设备管理  郁进榜
    * 主机管理 雒晓帆
    * POOL管理  谢鹏
    * 监控 谢鹏,郭威


2014年48周
======================
* 47周cmdb小分队主要工作如下
    * 满载率测试,上线
    * 权限设计
    * 机器入pool （剩下60台）


* 48周主要功能在
    * 堡垒机权限开发,周一周会过UI并进行任务分配
    * pool继续整理
    * pool 满载率观察和调优
    * cmdb体验优化


2014年47周
======================
* 46周cmdb小分队主要工作如下
    * 机器满载率设计及开发
    * 所有机器入POOL 整理
    * 页面操作优化(详细的请看47周测试清单)

* 47周主要功能在
    * 功能测试(安装清单测试)
    * 所以机器入POOL
    * 权限系统设计和原型图

======================
2014年46周
* 45周cmdb小分队主要工作如下
    * 自由接警
    * 用户中心
    * CMDB 优化
        * pool 添加和修改 表单优化
        * 添加和修改主机 JS 验证
        * 删除主机时,删除关注和订阅报警的关系(好像也要把pool和主机的关系也干掉，46周做)

* 46周cmdb的主要工作
    * 服务器负载
        * 公式 server_load  = (per core load) ,(Disk) ,(Memery),(Network I/O),(WAIT IO  util)
        * POOL 负载 = 95线
        * 当前POOL负载,当前最高负载？
        * 机器负载 新建一个表,host_load 表,使用Job 进行数据计算(先计算一次的多久,应该10/20分钟运行一次可以的)
        * POOL负载 新建一个表,pool_load 表,使用Job 每天计算一次

    * cmdb 数据维护
        * 主机状态目前有点混乱,例如cmdb 中bak的机器都是可使用
        * 目前发现有些机器有多个ip,但是以前老的zeus只记录了一部分ip,后面需要有工具核对
        * 列出现在对外提供的api，上线之后要check是否正常
        * 删除主机也要删除POOL的对应关系

    * 机柜纬度聚合订阅展示




2014年45周
* 44周cmdb小分队主要工作如下
    * cmdb发布前准备
        * 权限系统
        * pool整理
    * 接警准备
        * 获取用户邮件地址的api
        * 订阅接警功能
        * zabbix接警脚本
        * zues系统负责人迁移job(默认接受报警)

    * 虚拟云系统测试


* 45周cmdb的主要工作
    * 自由接警接入
    * 用户中心允许用户填写和修改邮箱
    * 服务器负载
    * 虚拟云IDC线上测试，环境部署
    * cmdb 数据维护
        * 主机状态目前有点混乱,例如cmdb 中bak的机器都是可使用
        * 目前发现有些机器有多个ip,但是以前老的zeus只记录了一部分ip,后面需要有工具核对
        * 列出现在对外提供的api，上线之后要check是否正常
    * 机柜纬度聚合订阅展示



2014年44周
* 43周主要工作
       * cmdb权限系统
       * 搜索优化,nginx 黑名单
       * cmdb api 速度优化
       * cloud系统 进入激动的新老系统数据接入阶段
* 44周主要工作
       * cmdb接警
       * pool 核对 和 pool管理小调动
       * cmdb用户中心开发：用户填写接警地址和sshkey，为cloud系统，接警和堡垒机权限 系统接入做准备
       * cloud  接入 老系统数据并准备上线
       * ssk系统接入开发 44周应该可以有个完整的版本上线或者上beta
       * dns服务接入cmdb
       * 机器满载率

2014年43周
* 42周主要工作:
       * CMDB系统权限系统设计完成,开发进度50%.CMDB磁盘优化,nginx配置解析
       * 虚拟云平台进度完成60%
* 43周主要工作(本周分支cmdb_201443):
       * CMDB系统权限开发,本周上线
       * 搜索优化,Nginx Ip 黑名单工具
       * 虚拟云平台
         * 数据迁移
         * 开发进度完成
       * DNS系统了解和整理

* 41周主要工作:通过解析nginx配置找出pool和pool下的机器,权限管理(谢鹏,周会讨论)
* 42周主要工作
  * nginx配置解析功能开发
  * 权限管理
  * 搜索修改,设备添加问题
  * 数据维护,上周小陆维护机房数据


2014年39周
* 38周主要工作:CMDB页面体验修改,自动化,主机bug修复,API接口对接DNS,数据补全(机房和供应商),整理DB和Image pool,监控完善,主机信息核对50%
* 39周主要工作
  * 核对剩下主机数据
  * 搜索问题修改
  * 88台主机找责任人核对(在抓取主机CPU等信息的时候发现有88台主机无法登陆)
  * 用户端pool整理
  * 监控体验完善
  * 计划周四下班前上一个beta版本,周五上GA版本

2014年38周
* 上周主要工作:设备和主机分类搜索,抓取核对job完善,监控基本功能
* 本周重点
    * 机器上线流程整理
    * 经纪人web和经纪人api ansible业务核对
    * 邀请业务方同事进行测试(局部公测)
    * 设备和主机设备核对,先job后人工
    * 权限控制
    * 监控进一步完善
    * 所有的开发进入分支开发,统一合并,分支线上测试环境地址:ops.dev.anjuke.com


2014年36周
* 上周主要做了pool和api
* 本周重点
  * api对接
  * cmdb 自动化设计和实现 [设计](docs/auto_monitor.md)
  * cmdb 加入监控功能

2014年35周
* api的设计,最佳实践的一些修改,抓取机器硬件信息的job
* 本周重点
  * 自动化(ansible),pool(经纪人pool和经纪人api pool)
  * api实现

2014年34周
* ops.corp.anjuke.com  已经更新最新版本
* 本周cmdb计划
  * api需求
        * 虚拟机api  进榜
        * hostname与ip解析 云龙
        * 根据hostname获取ip kwoning
        * 更改主机状态  自动化有需要
  * job需求
        *  获取各主机的cpu,hostnsme,内存,硬盘等
  * 自动化上架
        * 确认两个pool
  * 最佳实践的修改

2014年33周
* zeus数据迁移
* cmdb基本功能完成
* 本周计划
  * 核心工作 测试cmdb功能问题  dev测试在 192.168.188.52:5000上测试
  * 核对转移数据是否正确


2014年32周
* IDC管理已经完成 (雒晓帆 & 郭威)
* pool管理和日志展示完成 70%  (雒晓帆 & 郭威)
* 设备管理完成度 50% (董炜)
* 主机管理完成度 50% (李本根)
* ops.corp.anjuke.com 线上环境已经搭建完成
* 本周计划
  * pool管理完善
  * zeus数据迁移做迁移准备:了解zeus的数据结构和核心数据逻辑
  * 设备管理完善
  * 主机管理完善

2014年31周
* 分工
  * 设备管理  董炜负责
  * 主机管理  李本根负责
  * 用户,IDC管理,pool管理和日志展示  郭威和雒晓帆负责
* 第一期时间安排
  * 7月28日-8月10日  第一期开发完成
  * 8月11日-8月15日  进行beta测试

2014年30周(已经完成)
* 列出cmdb第一期功能列表并找负责人
* 周二 金伟完成前端框架并完成登陆功能
* 周二 完成建表需求并完成python flask 框架和开发机器环境

CMDB计划排期表
=======================
* 7月28日-8月15日  第一期完成
* 8月17日-8月28日  完成监控和beta测试
* 8月29日-9月12日  完成用户权限管理和pool流程自动化
