{% extends "public/layout.html" %}{% block customstyle %}<link rel="stylesheet" href="{{ url_for('static', filename='css/jquery-ui.min.css') }}"/><link rel="stylesheet" href="{{ url_for('static', filename='plugins/footable/css/footable.core.css') }}"/><style type="text/css">    .margin_custom {        margin-right: 8px;        float: right;    }    .ui-autocomplete {        z-index: 9000;    }    .tooltip-display{        	color: #0078a0;    }</style>{% endblock %}{% block main %}<h5 class="content_title">    <span>POOL 服务</span>    {% if show.add %}        <a id="addpool" href="javascript:void(0);" class="button radius right tiny">+ 添加pool</a>    {% endif %}</h5><hr><div class="row">        <form action="{{ url_for('pool.index') }}" method="get" id="searchForm">        <div class="row">            <div class="large-1 columns margin_custom">                 <a href="{{ url_for('pool.exportsearch',mysearch='s'+search['q']+'@&'+search['dep']) }}" class="button radius right postfix" style="margin-left: 8px;"> 导出 </a>            </div>            <div class="large-1 columns margin_custom">                <input type="submit" class="postfix radius button" value="搜索" id="searchBtn">            </div>            <div class="large-2 columns margin_custom">                <input type="text" name="q" placeholder="请输入..." value="{{ q }}">            </div>             <div class="large-3 small-3 columns margin_custom">                 <select id="dp_id_2">                    <option value="1000">所有部门</option>                    {% for item in department_info %}                        <option value="{{ item.id }}"> {{ item.name }}</option>                    {% endfor %}                </select>            </div>        </div>    </form></div>{% if poollist %}<table style="width: 100%">    <thead>    <tr>        <th data-sort-ignore="true">名称</th>        <th data-type="numeric">满载率</th>        <th data-sort-ignore="true">pool负责人</th>        <th data-sort-ignore="true">业务负责人</th>        <th data-sort-ignore="true">运维负责人</th>        <th data-sort-ignore="true">部门</th>        {% if show.modify and show.delete %}        <th data-sort-ignore="true">操作</th>        {% endif %}    </tr>    </thead>    <tbody>    {% for item in poollist %}    <tr>        <td><a href="{{ url_for('pool.detail',id=item.id) }}">{{ item.source_desc }} {{ item.name }}</a></td>        <td class="poolload poolload_{{ item.id }}">            <a data-type="numeric" data-value="" href="{{ url_for('monitor.index',pool_id=item.id)}}" class="tooltip-display" data="采集时间:未知">--</a>        </td>        <td>{{ item.team_owner_name }}</td>        <td>{{ item.biz_owner_name }}</td>        <td>{{ item.ops_owner_name }}</td>        <td>{{ item.department }}</td>        {% if show.modify and show.delete %}        <td>            {% if show.modify %}                <a class="cs_pooledit" id="pool_edit_{{ item.id }}">编辑</a>&nbsp;&nbsp;            {% endif %}            {% if show.delete %}                <a class="cs_pooldel" id="pool_del_{{ item.id }}">删除</a>&nbsp;&nbsp;            {% endif %}            {% if show.modify %}                <a class="cs_poolexport" href="{{ url_for('pool.exportsingle',pool_id=item.id)  }}" id="pool_export_{{ item.id }}">导出</a>            {% endif %}        </td>        {% endif %}    </tr>    {% endfor %}    </tbody></table>{% endif %}<div id="pooldiv" class="reveal-modal small" data-reveal>    <h3>添加pool</h3>    <div data-alert class="alert-box alert" id="msgtips" style="display: none;">    </div>    <div class="row">        <input type="text" id="name" placeholder="请输入pool名称">        <input type="text" id="byname" placeholder="请输入pool在Nginx中的upstream名称,没有可以不填">        <input type="hidden" id="ops_owner_id">        <input type="text" id="ops_owner" placeholder="请输入ops负责人">        <input type="hidden" id="team_owner_id">        <input type="text" id="team_owner" placeholder="请输入pool负责人">        <input type="hidden" id="biz_owner_id">        <input type="text" id="biz_owner" placeholder="请输入业务负责人">        <select id="source">            <option value="0">选择类型</option>            <option value="1">KFS</option>            <option value="2">USER</option>            <option value="3">BROKER</option>            <option value="4">OTHER</option>            <option value="5">PUBLIC</option>            <option value="6">BI</option>            <option value="7">OPS</option>            <option value="8">INNER</option>            <option value="9">DB</option>        </select>        <select id="dp_id">            <option selected="selected" value="1000">请选择所属部门</option>            {% for item in department_info %}                <option value="{{ item.id }}">{{ item.name }}</option>            {% endfor %}        </select>        <textarea id="content" placeholder="请输入pool描述"></textarea>        <textarea id="note" placeholder="请输入备注"></textarea>        <input type="hidden" id="primaryid"/>        <a id="doadd" href="javascript:void(0);" class="button  radius tiny right">确认</a>    </div>    <a class="close-reveal-modal" id="closebtn">&#215;</a></div>{% endblock %}{% block customscript %}    {% assets filters="jsmin", output="asset/pool.js", "js/jquery-ui.min.js","js/pool.js" , "js/follow.js", "js/common-lib.js" %}        <script type="text/javascript" src="{{ ASSET_URL }}"></script>        {{ fujs.js }}    {% endassets %}    <script>        var cu_dep={{dp_id|tojson|safe}}    </script>{% endblock %}