{% extends "public/joblayout.html" %}
{% block customstyle %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/jquery-ui.min.css') }}"/>
<link rel="stylesheet" href="/static/css/bootstrap-theme.css"/>
<link rel="stylesheet" href="/static/css/bootstrap-theme.min.css"/>
<link rel="stylesheet" href="/static/css/bootstrap.min.css"/>
{% endblock %}
{% block main %}
<h5 class="content_title">
    <span>新建作业</span>
</h5>
<hr>
<div class="panel-body">
    <div class="row">
        <div class="inline" style="margin-left: 25px;margin-bottom: 5px">
             <label class="label">作业名称</label><span><font color="red">&nbsp;*</font> </span>
             <input id="jobname" type="input"   placeholder="job name" style="width: 200px">
        </div>
        <ul id="step_ul" class="list-group">
            <li id="step_li" class="list-group-item step_li_c">
                <div class="inline row" style="background-color: #6DB96D;margin-left: 1px;height: 40px">
                  <label class="label-important" style="margin-top: 5px"><font color="white">步骤名称</font> </label>
                   <span style="margin-top: 5px"><font color="red">&nbsp;*</font> </span>:&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <input style="width: 200px;margin-top: 5px" type="input"  placeholder="name">
                   <button id="delete_cr_step" style="background-color: white;margin-top: 7px;margin-right: 2px;color: red"  class="glyphicon glyphicon-remove pull-right btn-xs"></button>
                  <button id="hide_detail"  style="background-color: white;margin-top: 7px;margin-right: 2px"  class="glyphicon glyphicon-chevron-down pull-right btn-xs hide_detail"></button>
                   <button id="show_detail" style="background-color: white;margin-top: 7px;margin-right: 2px"  class="glyphicon glyphicon-chevron-up pull-right btn-xs show_detail"></button>

               </div>
                <div class="row" style="margin-left: 2px">
                    <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered mt20 dataTable no-footer" id="resultTable" role="grid" aria-describedby="resultTable_info">
                        <thead>
                        <tr role="row">
                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" style="width: 33%">脚本数量</th>
                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" style="width: 33%">服务器数量</th>
                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" style="width: 33%">操作</th>
                        </tr>
                    </thead>
                    </table>
                    <table id="table_detail" class="group-node-table table table-out-bordered table-condensed">
                        <tbody>
                            <tr>
                                <td style="width: 33%;text-align: center">
                                    <input type="text" class="form-control " style="margin-top:7px" disabled>
                                </td>
                                <td style="width: 33%;text-align: center">
                                    <input type="text" class="form-control" style="margin-top:7px" disabled>
                                </td>
                                <td style="width: 33%;text-align: center">
                                    <a href="javascript:void(0)" title="编辑"  ><i style="margin-top: 11px;margin-left: 3px;margin-right: 3px;font-size: 20px" class="glyphicon glyphicon-pencil "></i></a>
                                    <a href="javascript:void(0)" title="上移"  ><i style="margin-top: 11px;margin-left: 3px;margin-right: 3px;font-size: 20px" class="glyphicon glyphicon-arrow-up "></i></a>
                                    <a href="javascript:void(0)" title="下移"  ><i style="margin-top: 11px;margin-left: 3px;margin-right: 3px;font-size: 20px" class="glyphicon glyphicon-arrow-down "></i></a>
                                    <a href="javascript:void(0)" title="删除"  ><i style="margin-top: 11px;margin-left: 3px;margin-right: 3px;font-size: 20px;color: red" class="glyphicon glyphicon-remove "></i></a>

                                </td>
                            </tr>
                            <tr class="tag-tr">
                                <td colspan="5" class="tag_td">
                                    <div class="form-group pt10">
                                        <label class="control-label ijobs-label-min">½Å±¾À´Ô´<span class="red">&nbsp;*</span>£º</label>
                                        <div class="ijobs-input-min">
                                            <label class="radio-inline"> <input type="radio" value="1" name="scriptFrom" disabled="disabled"> ÊÖ¹¤Â¼Èë
                                            </label> <label class="radio-inline"> <input type="radio" value="2" name="scriptFrom" checked="checked" disabled="disabled"> ½Å±¾¿ËÂ¡
                                            </label> <label class="radio-inline"> <input type="radio" value="3" name="scriptFrom" disabled="disabled"> ±¾µØ½Å±¾
                                            </label>
                                        </div>
                                    </div>

                                    <div class="form-group scriptCopy">
                                        <label class="control-label ijobs-label-min"></label>
                                        <div class="ijobs-input" style="background-color: #f3f3f4;">
                                            <div class="col-sm-10">
                                                <div class="row" style="margin: 10px 0px 10px 0px;">
                                                    <label class="control-label">½Å±¾Ãû³Æ<span class="red">&nbsp;*</span>£º</label>
                                                    <select class="cmbScript" data-placeholder="ÇëÑ¡Ôñ½Å±¾" style="display: none;"><option></option><option value="31">°æ±¾·¢²¼-ÆôÓÃ¼à¿Ø</option><option value="30">°æ±¾·¢²¼-Í£Ö¹¼à¿Ø</option><option value="27">°æ±¾·¢²¼-±¸·ÝDB</option><option value="26">°æ±¾·¢²¼-±¸·ÝÏßÉÏ³ÌÐò</option><option value="23">°æ±¾·¢²¼-¶ÔÍâ¿ª¶Ë¿Ú</option><option value="22">°æ±¾·¢²¼-¶ÔÍâÍ£¶Ë¿Ú</option><option value="19">°æ±¾·¢²¼-Æô¶¯Ç°¶Ë½ø³Ì</option><option value="18">°æ±¾·¢²¼-Æô¶¯ºóÌ¨½ø³Ì</option><option value="17">°æ±¾·¢²¼-¸üÐÂDB</option><option value="16">°æ±¾·¢²¼-¸üÐÂ°æ±¾ÎÄ¼þ</option><option value="15">°æ±¾·¢²¼-Í£DB</option><option value="14">°æ±¾·¢²¼-Í£ºóÌ¨½ø³Ì</option><option value="13">°æ±¾·¢²¼-Í£Ç°¶Ë½ø³Ì</option><option value="5">ÏÔÊ¾Ö÷»úÃû</option><option value="4">lsÄ¿Â¼/tmp/demo/</option></select><div class="chosen-container chosen-container-single" style="width: 350px;" title=""><a class="chosen-single chosen-default" tabindex="-1"><span>ÇëÑ¡Ôñ½Å±¾</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off"></div><ul class="chosen-results"><li class="active-result" data-option-array-index="1">°æ±¾·¢²¼-ÆôÓÃ¼à¿Ø</li><li class="active-result" data-option-array-index="2">°æ±¾·¢²¼-Í£Ö¹¼à¿Ø</li><li class="active-result" data-option-array-index="3">°æ±¾·¢²¼-±¸·ÝDB</li><li class="active-result" data-option-array-index="4">°æ±¾·¢²¼-±¸·ÝÏßÉÏ³ÌÐò</li><li class="active-result" data-option-array-index="5">°æ±¾·¢²¼-¶ÔÍâ¿ª¶Ë¿Ú</li><li class="active-result" data-option-array-index="6">°æ±¾·¢²¼-¶ÔÍâÍ£¶Ë¿Ú</li><li class="active-result" data-option-array-index="7">°æ±¾·¢²¼-Æô¶¯Ç°¶Ë½ø³Ì</li><li class="active-result" data-option-array-index="8">°æ±¾·¢²¼-Æô¶¯ºóÌ¨½ø³Ì</li><li class="active-result" data-option-array-index="9">°æ±¾·¢²¼-¸üÐÂDB</li><li class="active-result" data-option-array-index="10">°æ±¾·¢²¼-¸üÐÂ°æ±¾ÎÄ¼þ</li><li class="active-result" data-option-array-index="11">°æ±¾·¢²¼-Í£DB</li><li class="active-result" data-option-array-index="12">°æ±¾·¢²¼-Í£ºóÌ¨½ø³Ì</li><li class="active-result" data-option-array-index="13">°æ±¾·¢²¼-Í£Ç°¶Ë½ø³Ì</li><li class="active-result" data-option-array-index="14">ÏÔÊ¾Ö÷»úÃû</li><li class="active-result" data-option-array-index="15">lsÄ¿Â¼/tmp/demo/</li></ul></div></div>
                                                    <!-- <a class=" king-btn king-info cmbScriptCopy" data-loading-text="Loading..." href="javascript:void(0)">¿½±´</a> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label ijobs-label-min">·þÎñÆ÷¼¯<span class="red">&nbsp;*</span>£º</label>
                                        <div class="ijobs-input h34">
                                    <div class="iplist">
                                        <div class="serverIp-Model-IsExist">
                                            <div class="row ml0 buttonGroup serverIpMode-1" style="width: 700px;">
                                                <input type="hidden" class="hidden-serverSetId">
                                                <input type="hidden" class="hidden-serverip-string">
                                                <div class="col-sm-5 p0">
                                                    <button type="button" class="btn btn-success showModel" style="width: 115px"><i class="fa fa-desktop"></i>&nbsp;Ñ¡Ôñ·þÎñÆ÷</button>
                                                </div>
                                                <div class="btnGroup col-sm-7 none pr0" style="text-align: right;">
                                                    <a class="king-btn king-noborder king-primary copy-serverip-btn min-w0">¸´ÖÆIP</a>
                                                    <a class="king-btn king-noborder king-danger clearBtn min-w0">Çå¿ÕIP</a>
                                                    <a class="king-btn king-noborder king-danger clear-not-installed-Btn min-w0">Çå¿ÕAgentÎ´°²×°</a>
                                                </div>
                                                <div class="col-sm-12 pl0 mt10 text-left server-text none"></div>

                                            </div>



                                            <div class="serverIp-result-table serverIpMode-1" style="width: 700px;">
                                                <table class="table table-header-bg mt40 mb0 serverIpResultTable table-bordered table-hover none">
                                                    <thead>
                                                        <tr>
                                                            <th>IP</th>
                                                            <th>×´Ì¬</th>
                                                            <th class="table-header-option-th">²Ù×÷</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                            <!-- Modal -->
                                            <div class="modal fade serverIpModal h1000" data-backdrop="false" data-keyboard="false" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-loading-wrap none" style="z-index: 9999;position: absolute;left:0;top:0;width:100%;height:100%;text-align:center;vertial-align:middle;">
                                <img src="./img/loading_2_36x36.gif" style="margin-left:-18px;position:absolute;top:50%;margin-top:-36px;">
                        </div>
                        <div class="modal-body h450">
                                <div class="nav nav-tabs serverIpListtabs w h40 pl20 text-left">
                                    <label class="pr5 radio-inline" style="cursor: pointer;"><input type="radio" name="serverSelect" value="1" checked="" disabled=""> Í¨¹ýIPÑ¡Ôñ·þÎñÆ÷</label>
                                    <label class="pr5 radio-inline" style="cursor: pointer;"><input type="radio" name="serverSelect" value="2" disabled=""> ÅäÖÃÆ½Ì¨</label>
                                    <label class="pr5 radio-inline" style="cursor: pointer;"><input type="radio" name="serverSelect" value="3" disabled=""> ÊÖ¶¯Ìí¼Ó</label>
                                    <label class="pr5 radio-inline" style="cursor: pointer;"><input type="radio" name="serverSelect" value="4" disabled=""> ·Ö×éÌí¼Ó</label>
                                </div>

                                <div class="tab-content" style="min-height:380px;position: relative;">
                                    <!-- start Í¨¹ýIPÑ¡Ôñ·þÎñÆ÷ -->
                                    <div class="ipList-tab-pane ipChoose-tab-pane w p10">
                                            <input type="text" class="form-control w filterText" placeholder="Í¨¹ýIP¡¢Ö÷»úÃû¡¢Agent×´Ì¬½øÐÐ¹ýÂË...">
                                            <table class="table table-header-bg mt10 w serverIp-result-table-thead table-hover serverIpTable" style="margin-bottom: -1px;">
                                                <thead>
                                                    <tr>
                                                        <th><input type="checkbox" class="selectedAllChecks" title="ËùÓÐÒ³"></th>
                                                        <th>Æ½Ì¨Ãû³Æ</th>
                                                        <th>IP</th>
                                                        <th>×´Ì¬</th>
                                                        <th>Ö÷»úÃû</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                    </div>
                                    <!-- end Í¨¹ýIPÑ¡Ôñ·þÎñÆ÷ -->

                                    <!-- start ÅäÖÃÆ½Ì¨ -->
                                    <div class="ipList-tab-pane configCenter-tab-pane none w p10">
                                        <div style="height: 384px; overflow: auto;text-align: left;" class="treeviewDiv"><div class="treeviewByAjax"></div></div>
                                    </div>
                                    <!-- end ÅäÖÃÆ½Ì¨ -->

                                    <!-- start ÊÖ¶¯Ìí¼Ó -->
                                    <div class="ipList-tab-pane manually-tab-pane none w p10">
                                        <textarea class="form-control server-ip-textarea" rows="3" placeholder="ÇëÊäÈëIP£¬ÒÔ¡°¿Õ¸ñ¡±»òÕß¡°»Ø³µ¡±»òÕß¡°;¡±·Ö¸ô" style="height: 375px"></textarea>
                                    </div>
                                    <!-- end ÊÖ¶¯Ìí¼Ó -->

                                    <!-- start ·þÎñÆ÷¼¯ -->
                                    <div class="ipList-tab-pane group-tab-pane none w p10">
                                        <input type="text" class="form-control w groupfilterText" placeholder="Í¨¹ýÃû³Æ¡¢ÃèÊö½øÐÐ¹ýÂË...">
                                        <table class="table table-header-bg mt10 w serverIp-result-table-thead table-hover groupTable" style="margin-bottom: -1px;">
                                            <thead>
                                                <tr>
                                                    <th style="width: 5%">&nbsp;</th>
                                                    <th style="width: 25%">·Ö×éÃû³Æ</th>
                                                    <th style="width: 70%">ÃèÊö</th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                    <!-- end ·þÎñÆ÷¼¯ -->
                                </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary savebtn">Ìí¼Ó</button>
                            <button type="button" class="btn btn-default cancelbtn">È¡Ïû</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal -->

                                        </div>
                                    </div>
                                </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </li>
        </ul>
        <div>
            <button class="btn btn-success" id="add_step"><i class="glyphicon glyphicon-plus"></i>&nbsp;添加新步骤</button>
        </div>
    </div>
</div>
{% block customscript %}
{% assets filters="jsmin", output="asset/runscripts.js","js/jquery-ui.min.js","js/jobplat/runscripts.js" %}
<script type="text/javascript" src="{{ ASSET_URL }}"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
{% endassets %}
{% endblock %}
<script>
    var step=$("#step_li").clone()

    $("#add_step").click(function () {
         $("#step_ul").append(step)

    })

{#     $(".hide_detail").on('click',function () {#}
{#         $(this).parents().find("#table_detail").each(function(){#}
{#              $(this).show()#}
{#             })#}
{#      })#}
{##}
{##}
{#     $(".show_detail").on('click',function () {#}
{#         $(this).parents().find("#table_detail").each(function () {#}
{#             $(this).hide()#}
{#         })#}
{#     })#}

     $("#step_ul").on("click",".show_deatil",function(){
          $(this).parents().find("#table_detail").each(function () {
             $(this).hide()
         })
     })

     $("#step_ul").on("click",".hide_detail",function(){
          $(this).parents().find("#table_detail").each(function () {
             $(this).show()
         })
     })


</script>
{% endblock %}
