# -*- coding: utf-8 -*-import jsonfrom application import dbfrom models.tasks import Tasksfrom models.host import Hostfrom views.host import _operation_logclass Callback:    def auto_callback(self,id):        info=Tasks.query.filter(Tasks.id==id).first()        if not info:            print "没有任务"        status=info.status        hosts=json.loads(info.hosts)        hostsmodel=Host.query.filter(Host.hostname.in_(hosts)).all()        for tmphosts in hostsmodel:            if status == 1:                tmphosts.status = Host.STATUS_ASSIGNED                db.session.commit()                log = json.dumps({'auto': '自动化ansible'}, ensure_ascii=False, separators=(',', ':')).encode('utf8')                _operation_log(tmphosts.id, 0, log)